<!DOCTYPE html>
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <title>用户登录</title>

    <!-- Bootstrap -->
    <link th:href="@{/css/bootstrap.min.css}"   rel="stylesheet"/>

    <script th:src="@{js/jquery-3.3.1.min.js}"></script>
    <script th:src="@{js/bootstrap.min.js}"></script>
    <script  >

      $(function () {
        $("#login").click(
                function () {
                  var id = $("#id").val();
                  var pwd = $("#pwd").val();
                  if ($('#id').val() == "" || $('#pwd').val() == "") {
                    alert("用户名或密码不能为空！");
                  }
                  else
                  {
                    var contextPath = "http://192.168.1.131:8091/";
                    // var contextPath ="${apiPath}" ;
                    var url = contextPath + "api/user/tologin/userid/" + id + "/pwd/" + pwd;
                    $.ajax({
                      type: "get",
                      url: url,
                      async: false, //不是异步处理
                      contentType: "application/json; charset=utf-8",
                      dataType: "json",

                      success: function (data) {
                        if (data.code == "success") {
                          //  alert(data.code.toString());
                          // alert("success");

                          //跳转到主页
                          window.location.href = contextPath + "home";

                        } else {
                          alert(data.errMsg.toString());
                          // window.location.href=contextPath+"/login";
                        }
                      },
                      error: function (result) {
                        alert("NAN");
                        //  window.location.href=contextPath+"/login";
                      }


                    });
                  }


                }


      )});









    </script>
     
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- HTML5 shim 和 Respond.js 是为了让 IE8 支持 HTML5 元素和媒体查询（media queries）功能 -->
    <!-- 警告：通过 file:// 协议（就是直接将 html 页面拖拽到浏览器中）访问页面时 Respond.js 不起作用 -->
    <!--[if lt IE 9]>
      <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>-->
<!--      <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>-->
<!--    <![endif]&ndash;&gt;-->


    
  </head>
  <body class="bg-info" >
    <br/>
    <br/>
    <br/>
    <br/>
    
    <div class="container ">
      <div class="row">

        <div class="col-md-4 col-sm-8 col-xs-8 col-md-offset-4 col-sm-offset-2 col-xs-offset-2  ">
          <div class="m-1">
            <form class="form-signin   " >
             
              <h2 class="form-signin-heading text-center">请登录</h2>
              <label for="id" class="sr-only ">用户名</label>
              <input type="text" id="id" class="form-control " placeholder="用户名" required autofocus>
             <br/>
              <label for="pwd" class="sr-only">密码</label>
              <input type="password" id="pwd" class="form-control" placeholder="密码" required>
              <div class="checkbox">
                <label>
                  <input type="checkbox" value="remember-me"> 记住我
                </label>
              </div>

            </form>
            <button id="login" class="btn btn-lg btn-primary btn-block"  >确定</button>

          </div>
          
          <br/> 
    
        </div>

      </div>
     
       
      </div> <!-- /container -->
<!--  -->
<!--    <script src="../bootstrap-3.3.7-dist/js/jquery.min.js"></script>-->
<!--    &lt;!&ndash; 加载 Bootstrap 的所有 JavaScript 插件。你也可以根据需要只加载单个插件。 &ndash;&gt;-->
<!--    &lt;!&ndash; <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js"></script> &ndash;&gt;-->
<!--    <script src="../bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>-->
  </body>
</html>